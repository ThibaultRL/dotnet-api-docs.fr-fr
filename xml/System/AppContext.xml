<Type Name="AppContext" FullName="System.AppContext">
  <Metadata><Meta Name="ms.openlocfilehash" Value="49517f88a836082c322517cf3be1d6516656af81" /><Meta Name="ms.sourcegitcommit" Value="7555c040bd7cb677d117ddf03e647aa7bf625bfc" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="fr-FR" /><Meta Name="ms.lasthandoff" Value="05/08/2019" /><Meta Name="ms.locfileid" Value="65440897" /></Metadata><TypeSignature Language="C#" Value="public static class AppContext" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi abstract sealed beforefieldinit AppContext extends System.Object" />
  <TypeSignature Language="DocId" Value="T:System.AppContext" />
  <TypeSignature Language="VB.NET" Value="Public Class AppContext" />
  <TypeSignature Language="C++ CLI" Value="public ref class AppContext abstract sealed" />
  <TypeSignature Language="F#" Value="type AppContext = class" />
  <AssemblyInfo>
    <AssemblyName>System.AppContext</AssemblyName>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>mscorlib</AssemblyName>
    <AssemblyVersion>2.0.5.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>netstandard</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>2.1.0.0</AssemblyVersion>
  </AssemblyInfo>
  <AssemblyInfo>
    <AssemblyName>System.Runtime</AssemblyName>
    <AssemblyVersion>4.2.0.0</AssemblyVersion>
    <AssemblyVersion>4.2.1.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Object</BaseTypeName>
  </Base>
  <Interfaces />
  <Docs>
    <summary><span data-ttu-id="1378f-101">Fournit des membres pour définir et récupérer des données sur le contexte d'une application.</span><span class="sxs-lookup"><span data-stu-id="1378f-101">Provides members for setting and retrieving data about an application's context.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="1378f-102">Le <xref:System.AppContext> classe permet aux auteurs de bibliothèque de fournir un mécanisme d’annulations uniforme des nouvelles fonctionnalités pour les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="1378f-102">The <xref:System.AppContext> class enables library writers to provide a uniform opt-out mechanism for new functionality for their users.</span></span> <span data-ttu-id="1378f-103">Elle établit un contrat souple entre les composants pour la communication des demandes de désactivation.</span><span class="sxs-lookup"><span data-stu-id="1378f-103">It establishes a loosely-coupled contract between components in order to communicate an opt-out request.</span></span> <span data-ttu-id="1378f-104">Cette fonctionnalité est particulièrement importante quand une modification est apportée aux fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="1378f-104">This capability is typically important when a change is made to existing functionality.</span></span> <span data-ttu-id="1378f-105">À l'inverse, il existe déjà une activation implicite des nouvelles fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1378f-105">Conversely, there is already an implicit opt-in for new functionality.</span></span>  
  
## <a name="appcontext-for-library-developers"></a><span data-ttu-id="1378f-106">AppContext pour les développeurs de bibliothèque</span><span class="sxs-lookup"><span data-stu-id="1378f-106">AppContext for library developers</span></span>  
 <span data-ttu-id="1378f-107">Bibliothèques utilisent le <xref:System.AppContext> bascule de classe pour définir et exposer la compatibilité, tandis que les utilisateurs de bibliothèque peuvent définir ces commutateurs pour affecter le comportement de la bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="1378f-107">Libraries use  the <xref:System.AppContext> class to define and expose compatibility switches, while library users can set those switches to affect the library behavior.</span></span> <span data-ttu-id="1378f-108">Par défaut, les bibliothèques fournissent la nouvelle fonctionnalité et ne peuvent la modifier (c'est-à-dire fournir la version antérieure) que si le commutateur est défini.</span><span class="sxs-lookup"><span data-stu-id="1378f-108">By default, libraries provide the new functionality, and they only alter it (that is, they provide the previous functionality) if the switch is set.</span></span>  <span data-ttu-id="1378f-109">Cela permet aux bibliothèques fournir un nouveau comportement pour une API existante tout en continuant à prendre en charge les appelants qui varient selon le comportement précédent.</span><span class="sxs-lookup"><span data-stu-id="1378f-109">This allows libraries to provide new behavior for an existing API while continuing to support callers who depend on the previous behavior.</span></span>  
  
### <a name="defining-the-switch-name"></a><span data-ttu-id="1378f-110">Définir le nom du commutateur</span><span class="sxs-lookup"><span data-stu-id="1378f-110">Defining the switch name</span></span>  
 <span data-ttu-id="1378f-111">La méthode la plus courante pour permettre aux consommateurs de votre bibliothèque de refuser à un changement de comportement consiste à définir un commutateur nommé.</span><span class="sxs-lookup"><span data-stu-id="1378f-111">The most common way to allow consumers of your library to opt out of a change of behavior is to define a named switch.</span></span>  <span data-ttu-id="1378f-112">Son `value` élément est une paire nom/valeur qui se compose du nom d’un commutateur et ses <xref:System.Boolean> valeur.</span><span class="sxs-lookup"><span data-stu-id="1378f-112">Its `value` element is a name/value pair that consists of the name of a switch and its <xref:System.Boolean> value.</span></span>  <span data-ttu-id="1378f-113">Par défaut, le commutateur est toujours implicitement `false`, qui fournit le nouveau comportement (et rend le nouveau comportement opt-in par défaut).</span><span class="sxs-lookup"><span data-stu-id="1378f-113">By default, the switch is always implicitly `false`, which provides the new behavior (and makes the new behavior opt-in by default).</span></span> <span data-ttu-id="1378f-114">Définissant le commutateur avec `true` lui permet, qui fournit le comportement hérité.</span><span class="sxs-lookup"><span data-stu-id="1378f-114">Setting the switch to `true` enables it, which provides the legacy behavior.</span></span> <span data-ttu-id="1378f-115">Explicitement en définissant le commutateur avec `false` fournit également le nouveau comportement.</span><span class="sxs-lookup"><span data-stu-id="1378f-115">Explicitly setting the switch to `false` also provides the new behavior.</span></span>  
  
 <span data-ttu-id="1378f-116">Il est préférable d’utiliser un format cohérent pour les noms de commutateur, puisqu’il s’agit d’un contrat formel exposé par une bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="1378f-116">It's beneficial to use a consistent format for switch names, since they are a formal contract exposed by a library.</span></span> <span data-ttu-id="1378f-117">Voici les deux formats évidents.</span><span class="sxs-lookup"><span data-stu-id="1378f-117">The following are two obvious formats.</span></span>  
  
-   <span data-ttu-id="1378f-118">*Commutateur*.*espace de noms*.*nom_commutateur*</span><span class="sxs-lookup"><span data-stu-id="1378f-118">*Switch*.*namespace*.*switchname*</span></span>  
  
-   <span data-ttu-id="1378f-119">*Commutateur*.*bibliothèque*.*nom_commutateur*</span><span class="sxs-lookup"><span data-stu-id="1378f-119">*Switch*.*library*.*switchname*</span></span>  
  
 <span data-ttu-id="1378f-120">Une fois que vous définissez et documentez le commutateur, les appelants peuvent l’utiliser à l’aide du Registre, en ajoutant un [ \<AppContextSwitchOverrides >](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) élément dans leur fichier de configuration d’application, ou en appelant le <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> méthode par programmation.</span><span class="sxs-lookup"><span data-stu-id="1378f-120">Once you define and document the switch, callers can use it by using the registry, by adding an  [\<AppContextSwitchOverrides>](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) element to their application configuration file, or by calling the  <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> method programmatically.</span></span> <span data-ttu-id="1378f-121">Consultez le [AppContext pour les consommateurs de la bibliothèque](#ForConsumers) section pour plus d’informations sur la façon dont les appelants utiliser et définir la valeur de <xref:System.AppContext> changements de configuration.</span><span class="sxs-lookup"><span data-stu-id="1378f-121">See the [AppContext for library consumers](#ForConsumers) section for more information about how callers use and set the value of <xref:System.AppContext> configuration switches.</span></span>  
  
 <span data-ttu-id="1378f-122">Lorsque le common language runtime exécute une application, il lit les paramètres de compatibilité du Registre automatiquement et charge le fichier de configuration d’application afin de renseigner l’application <xref:System.AppContext> instance.</span><span class="sxs-lookup"><span data-stu-id="1378f-122">When the common language runtime runs an application, it automatically reads the registry's compatibility settings and loads the application configuration file in order to populate the application's <xref:System.AppContext> instance.</span></span> <span data-ttu-id="1378f-123">Étant donné que le <xref:System.AppContext> instance est remplie par programmation à l’appelant ou par le runtime, vous n’avez pas à intervenir, comme l’appel la <xref:System.AppContext.SetSwitch%2A> méthode, pour configurer le <xref:System.AppContext> instance.</span><span class="sxs-lookup"><span data-stu-id="1378f-123">Because the <xref:System.AppContext> instance is populated either programmatically by the caller or by the runtime, you do not have to take any action, such as calling the <xref:System.AppContext.SetSwitch%2A> method,  to configure the <xref:System.AppContext> instance.</span></span>  
  
### <a name="checking-the-setting"></a><span data-ttu-id="1378f-124">Le paramètre de vérification de la</span><span class="sxs-lookup"><span data-stu-id="1378f-124">Checking the setting</span></span>  
 <span data-ttu-id="1378f-125">Vous pouvez ensuite vérifier si un consommateur a déclaré la valeur du commutateur et act de manière appropriée en appelant le <xref:System.AppContext.TryGetSwitch%2A?displayProperty=nameWithType> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-125">You can then check if a consumer has declared the value of the switch and act appropriately by calling the <xref:System.AppContext.TryGetSwitch%2A?displayProperty=nameWithType> method.</span></span> <span data-ttu-id="1378f-126">La méthode retourne `true` si le `switchName` argument se trouve, et lorsque la méthode est retournée, ses `isEnabled` argument indique la valeur du commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-126">The method returns `true` if the `switchName` argument is found, and when the method returns, its `isEnabled` argument indicates the value of the switch.</span></span>  <span data-ttu-id="1378f-127">Dans le cas contraire, la méthode retourne `false`.</span><span class="sxs-lookup"><span data-stu-id="1378f-127">Otherwise, the method returns `false`.</span></span>  
  
### <a name="an-example"></a><span data-ttu-id="1378f-128">Exemple</span><span class="sxs-lookup"><span data-stu-id="1378f-128">An example</span></span>  
 <span data-ttu-id="1378f-129">L’exemple suivant illustre l’utilisation de la <xref:System.AppContext> classe pour permettre au client choisir le comportement d’origine d’une méthode de bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="1378f-129">The following example illustrates the use of the <xref:System.AppContext> class to allow the customer to choose the original behavior of a library method.</span></span>   <span data-ttu-id="1378f-130">Voici la version 1.0 d’une bibliothèque nommée `StringLibrary`.</span><span class="sxs-lookup"><span data-stu-id="1378f-130">The following is version 1.0 of a library named `StringLibrary`.</span></span> <span data-ttu-id="1378f-131">Il définit un `SubstringStartsAt` méthode qui effectue une comparaison ordinale pour déterminer l’index de départ d’une sous-chaîne dans une chaîne plus grande.</span><span class="sxs-lookup"><span data-stu-id="1378f-131">It defines a `SubstringStartsAt` method that performs an ordinal comparison to determine the starting index of a substring within a larger string.</span></span>  
  
 [!code-csharp[System.AppContext.Class#4](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/Example4.cs#4)]
 [!code-vb[System.AppContext.Class#4](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/Example4.vb#4)]  
  
 <span data-ttu-id="1378f-132">L’exemple suivant utilise ensuite la bibliothèque pour rechercher l’index de départ de la sous-chaîne « archæ » dans « L’archaeologist ».</span><span class="sxs-lookup"><span data-stu-id="1378f-132">The following example then uses the library to find the starting index of the substring "archæ" in "The archaeologist".</span></span> <span data-ttu-id="1378f-133">Étant donné que la méthode effectue une comparaison ordinale, la sous-chaîne est introuvable.</span><span class="sxs-lookup"><span data-stu-id="1378f-133">Because the method performs an ordinal comparison, the substring cannot be found.</span></span>  
  
 [!code-csharp[System.AppContext.Class#5](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/Example4.cs#5)]
 [!code-vb[System.AppContext.Class#5](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/Example4.vb#5)]  
  
 <span data-ttu-id="1378f-134">Toutefois, modification de la version 2 de la bibliothèque, le `SubstringStartsAt` méthode à utiliser la comparaison dépendante de la culture.</span><span class="sxs-lookup"><span data-stu-id="1378f-134">Version 2 of the library, however, changes the `SubstringStartsAt` method to use culture-sensitive comparison.</span></span>  
  
 [!code-csharp[System.AppContext.Class#6](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/Example6.cs#6)]
 [!code-vb[System.AppContext.Class#6](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/Example6.vb#6)]  
  
 <span data-ttu-id="1378f-135">Lorsque l’application est recompilée à exécuter sur la nouvelle version de la bibliothèque, il signale désormais que la sous-chaîne « archæ » située à l’index 4 dans « L’archaeologist ».</span><span class="sxs-lookup"><span data-stu-id="1378f-135">When the app is recompiled to run against the new version of the library, it now reports that the substring "archæ" is found at index 4 in "The archaeologist".</span></span>  
  
 [!code-csharp[System.AppContext.Class#7](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/Example6.cs#7)]
 [!code-vb[System.AppContext.Class#7](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/Example6.vb#7)]  
  
 <span data-ttu-id="1378f-136">Cette modification peut être empêchée de s’arrêter les applications qui reposent sur le comportement d’origine en définissant un [ \<AppContextSwitchOverrides >](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) basculer.</span><span class="sxs-lookup"><span data-stu-id="1378f-136">This change can be prevented from breaking the applications that depend on the original behavior by defining an [\<AppContextSwitchOverrides>](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) switch.</span></span> <span data-ttu-id="1378f-137">Dans ce cas, le commutateur est nommé `StringLibrary.DoNotUseCultureSensitiveComparison`.</span><span class="sxs-lookup"><span data-stu-id="1378f-137">In this case, the switch is named `StringLibrary.DoNotUseCultureSensitiveComparison`.</span></span> <span data-ttu-id="1378f-138">Sa valeur par défaut, `false`, indique que la bibliothèque doit effectuer sa comparaison dépendante de la culture de version 2.0.</span><span class="sxs-lookup"><span data-stu-id="1378f-138">Its default value, `false`, indicates that the library should perform its version 2.0 culture-sensitive comparison.</span></span> <span data-ttu-id="1378f-139">`true` Indique que la bibliothèque doit effectuer sa comparaison ordinale version 1.0.</span><span class="sxs-lookup"><span data-stu-id="1378f-139">`true` indicates that the library should perform its version 1.0 ordinal comparison.</span></span>  <span data-ttu-id="1378f-140">Une légère modification du code précédent permet au consommateur de la bibliothèque définir le commutateur pour déterminer le type de comparaison, que la méthode effectue.</span><span class="sxs-lookup"><span data-stu-id="1378f-140">A slight modification of the previous code allows the library consumer to set the switch to determine the kind of comparison the method performs.</span></span>  
  
 [!code-csharp[System.AppContext.Class#8](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/Example8.cs#8)]
 [!code-vb[System.AppContext.Class#8](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/Example8.vb#8)]  
  
 <span data-ttu-id="1378f-141">Si l’application peut ensuite utiliser le fichier de configuration suivant pour restaurer le comportement de la version 1.0.</span><span class="sxs-lookup"><span data-stu-id="1378f-141">If application can then use the following configuration file to restore the version 1.0 behavior.</span></span>  
  
```xml  
  
<configuration>  
   <runtime>  
      <AppContextSwitchOverrides value="StringLibrary.DoNotUseCultureSensitiveComparison=true" />   
   </runtime>  
</configuration>  
  
```  
  
 <span data-ttu-id="1378f-142">Lorsque l’application est exécutée avec le fichier de configuration présents, il génère la sortie suivante :</span><span class="sxs-lookup"><span data-stu-id="1378f-142">When the application is run with the configuration file present, it produces the following output:</span></span>  
  
```  
'archæ' not found in 'The archaeologist'  
```  
  
<a name="ForConsumers"></a>   
## <a name="appcontext-for-library-consumers"></a><span data-ttu-id="1378f-143">AppContext pour les consommateurs de bibliothèque</span><span class="sxs-lookup"><span data-stu-id="1378f-143">AppContext for library consumers</span></span>  
 <span data-ttu-id="1378f-144">Si vous êtes le consommateur d’une bibliothèque, le <xref:System.AppContext> classe vous permet de tirer parti d’une bibliothèque ou mécanisme de désactivation de la méthode bibliothèque des nouvelles fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1378f-144">If you are the consumer of a library, the <xref:System.AppContext> class  allows you to take advantage of a library or library method's opt-out mechanism for new functionality.</span></span>   <span data-ttu-id="1378f-145">Les méthodes individuelles de la bibliothèque de classes que vous appelez définissent les commutateurs particuliers qui activent ou désactivent un nouveau comportement.</span><span class="sxs-lookup"><span data-stu-id="1378f-145">Individual methods of the class library that you are calling define particular switches that enable or disable a new behavior.</span></span> <span data-ttu-id="1378f-146">La valeur du commutateur est une valeur booléenne.</span><span class="sxs-lookup"><span data-stu-id="1378f-146">The value of the switch  is a Boolean.</span></span> <span data-ttu-id="1378f-147">S’il s’agit `false`, qui est généralement la valeur par défaut, le nouveau comportement est activé ; si elle est `true`, le nouveau comportement est désactivé, et le membre se comporte comme elle le faisait auparavant.</span><span class="sxs-lookup"><span data-stu-id="1378f-147">If it is `false`, which is typically the default value, the new behavior is enabled; if it is `true`, the new behavior is disabled, and the member behaves as it did previously.</span></span>  
  
 <span data-ttu-id="1378f-148">Vous pouvez définir la valeur d’un commutateur de quatre manières :</span><span class="sxs-lookup"><span data-stu-id="1378f-148">You can set the value of a switch in one of four ways:</span></span>  
  
-   <span data-ttu-id="1378f-149">En appelant le <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> méthode dans votre code.</span><span class="sxs-lookup"><span data-stu-id="1378f-149">By calling the <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> method in your code.</span></span>  <span data-ttu-id="1378f-150">Le `switchName` argument définit le nom du commutateur et le `isEnabled` propriété définit la valeur du commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-150">The `switchName` argument defines the switch name, and the `isEnabled` property defines the value of the switch.</span></span> <span data-ttu-id="1378f-151">Étant donné que <xref:System.AppContext> est une classe statique, il est disponible sur une base par domaine d’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-151">Because <xref:System.AppContext> is a static class, it is available on a per-application domain basis.</span></span>  
  
     <span data-ttu-id="1378f-152">Appel de la <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> a une portée de l’application ; autrement dit, elle affecte uniquement l’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-152">Calling the <xref:System.AppContext.SetSwitch%28System.String%2CSystem.Boolean%29?displayProperty=nameWithType> has application scope; that is, it affects only the application.</span></span>  
  
-   <span data-ttu-id="1378f-153">En ajoutant un `<AppContextSwitchOverrides>` élément à la [ \<runtime >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section de votre fichier app.config.</span><span class="sxs-lookup"><span data-stu-id="1378f-153">By adding an `<AppContextSwitchOverrides>` element to the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of your app.config file.</span></span> <span data-ttu-id="1378f-154">Le commutateur a un attribut unique, `value`, dont la valeur est une chaîne qui représente une paire clé/valeur contenant le nom du commutateur et sa valeur.</span><span class="sxs-lookup"><span data-stu-id="1378f-154">The switch has a single attribute, `value`, whose value is a string that represents a key/value pair containing both the switch name and its value.</span></span>  
  
     <span data-ttu-id="1378f-155">Pour définir plusieurs commutateurs, séparez la paire clé/valeur de chaque commutateur dans le [ \<AppContextSwitchOverrides >](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) l’élément `value` attribut par un point-virgule.</span><span class="sxs-lookup"><span data-stu-id="1378f-155">To define multiple switches, separate each switch's key/value pair in the [\<AppContextSwitchOverrides>](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) element's `value` attribute with a semicolon.</span></span> <span data-ttu-id="1378f-156">Dans ce cas, le `<AppContextSwitchOverrides>` élément a le format suivant :</span><span class="sxs-lookup"><span data-stu-id="1378f-156">In that case, the `<AppContextSwitchOverrides>` element has the following format:</span></span>  
  
    ```xml  
    <AppContextSwitchOverrides value="switchName1=value1;switchName2=value2" />  
    ```  
  
     <span data-ttu-id="1378f-157">À l’aide de la `<AppContextSwitchOverrides>` élément pour définir un paramètre de configuration a une portée de l’application ; autrement dit, elle affecte uniquement l’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-157">Using the `<AppContextSwitchOverrides>` element to define a configuration setting has application scope; that is, it affects only the application.</span></span>  

    > [!NOTE]    
    > <span data-ttu-id="1378f-158">Pour plus d’informations sur les commutateurs définis par le .NET Framework, consultez le [ \<AppContextSwitchOverrides > élément](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md).</span><span class="sxs-lookup"><span data-stu-id="1378f-158">For information on the switches defined by the .NET Framework, see the [\<AppContextSwitchOverrides> element](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md).</span></span>

-   <span data-ttu-id="1378f-159">En ajoutant une valeur de chaîne dont le nom est le nom du commutateur à la `HKLM\SOFTWARE\Microsoft\.NETFramework\AppContext` clé dans le Registre.</span><span class="sxs-lookup"><span data-stu-id="1378f-159">By adding a string value whose name is the name of the switch to the `HKLM\SOFTWARE\Microsoft\.NETFramework\AppContext` key in the registry.</span></span> <span data-ttu-id="1378f-160">Sa valeur doit être la représentation sous forme de chaîne d’un <xref:System.Boolean> qui peut être analysé par le <xref:System.Boolean.Parse%2A?displayProperty=nameWithType> méthode ; autrement dit, il doit être le « True », « true », « False » ou « false ».</span><span class="sxs-lookup"><span data-stu-id="1378f-160">Its value must be the string representation of a <xref:System.Boolean> that can be parsed by the <xref:System.Boolean.Parse%2A?displayProperty=nameWithType> method; that is, it must be "True", "true", "False", or "false".</span></span> <span data-ttu-id="1378f-161">Si l’exécution rencontre une autre valeur, il ignore le commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-161">If the runtime encounters any other value, it ignores the switch.</span></span>  
  
     <span data-ttu-id="1378f-162">À l’aide du Registre pour définir un <xref:System.AppContext> commutateur a la portée de l’ordinateur ; autrement dit, elle affecte toutes les applications en cours d’exécution sur l’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-162">Using the registry to define an <xref:System.AppContext> switch has machine scope; that is, it affects every application running on the machine.</span></span>  

- <span data-ttu-id="1378f-163">Pour les applications ASP.NET, vous ajoutez un [ \<Ajouter >](~/docs/framework/configure-apps/file-schema/appsettings/add-element-for-appsettings.md) élément à la [ \<appSettings >](~/docs/framework/configure-apps/file-schema/appsettings/index.md) section du fichier web.config.</span><span class="sxs-lookup"><span data-stu-id="1378f-163">For ASP.NET applications, you add an [\<Add>](~/docs/framework/configure-apps/file-schema/appsettings/add-element-for-appsettings.md) element to the [\<appSettings>](~/docs/framework/configure-apps/file-schema/appsettings/index.md) section of the web.config file.</span></span> <span data-ttu-id="1378f-164">Exemple :</span><span class="sxs-lookup"><span data-stu-id="1378f-164">For example:</span></span>

   ```xml
   <appSettings>
      <add key="AppContext.SetSwitch:switchName1" value="switchValue1" />
      <add key="AppContext.SetSwitch:switchName2" value="switchValue2" />
   </appSettings>
   ```
   
 <span data-ttu-id="1378f-165">Si vous définissez le même commutateur dans plusieurs façons, l’ordre de priorité pour déterminer quel paramètre remplace les autres est :</span><span class="sxs-lookup"><span data-stu-id="1378f-165">If you set the same switch in more than one way, the order of precedence for determining which setting overrides the others is:</span></span>  
  
1.  <span data-ttu-id="1378f-166">La définition par programmation.</span><span class="sxs-lookup"><span data-stu-id="1378f-166">The programmatic setting.</span></span>  
  
2.  <span data-ttu-id="1378f-167">Le paramètre dans le fichier de configuration d’application ou le fichier web.config.</span><span class="sxs-lookup"><span data-stu-id="1378f-167">The setting in the app config file or the web.config file.</span></span>  
  
3.  <span data-ttu-id="1378f-168">Le paramètre de Registre.</span><span class="sxs-lookup"><span data-stu-id="1378f-168">The registry setting.</span></span>  
  
 <span data-ttu-id="1378f-169">Ce qui suit est une application simple qui transmet un URI de fichier pour le <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=nameWithType> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-169">The following is a simple application that passes a file URI to the <xref:System.IO.Path.GetDirectoryName%2A?displayProperty=nameWithType> method.</span></span>  <span data-ttu-id="1378f-170">Lors de l’exécution sous le .NET Framework 4.6, elle lève une <xref:System.ArgumentException> car `file://` n’est plus une partie d’un chemin de fichier valide.</span><span class="sxs-lookup"><span data-stu-id="1378f-170">When run under the .NET Framework 4.6, it throws an <xref:System.ArgumentException> because `file://` is no longer a valid part of a file path.</span></span>  
  
 [!code-csharp[System.AppContext.Class#10](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/ForConsumers1.cs#10)]
 [!code-vb[System.AppContext.Class#10](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/ForConsumers1.vb#10)]  
  
 <span data-ttu-id="1378f-171">Pour restaurer le comportement précédent de la méthode et empêcher l’exception, vous pouvez ajouter la `Switch.System.IO.UseLegacyPathHandling` basculer vers le fichier de configuration d’application pour l’exemple :</span><span class="sxs-lookup"><span data-stu-id="1378f-171">To restore the method's previous behavior and prevent the exception, you can add the `Switch.System.IO.UseLegacyPathHandling` switch to the application configuration file for the example:</span></span>  
  
```xml  
<configuration>  
    <runtime>  
        <AppContextSwitchOverrides value="Switch.System.IO.UseLegacyPathHandling=true" />    
    </runtime>  
</configuration>  
```  
## <a name="see-also"></a><span data-ttu-id="1378f-172">Voir aussi</span><span class="sxs-lookup"><span data-stu-id="1378f-172">See also</span></span>
[<span data-ttu-id="1378f-173">Commutateur appcontext la valeur</span><span class="sxs-lookup"><span data-stu-id="1378f-173">AppContext switch</span></span>](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md)

 ]]></format>
    </remarks>
    <related type="Article" href="https://msdn.microsoft.com/library/1eb2fae3-de4b-45b6-852f-517c39b751bd"><span data-ttu-id="1378f-174">&lt;runtime&gt; élément</span><span class="sxs-lookup"><span data-stu-id="1378f-174">&lt;runtime&gt; Element</span></span></related>
    <related type="Article" href="https://msdn.microsoft.com/library/4ce07f47-7ddb-4d91-b067-501bd8b88752"><span data-ttu-id="1378f-175">&lt;AppContextSwitchOverrides&gt; élément</span><span class="sxs-lookup"><span data-stu-id="1378f-175">&lt;AppContextSwitchOverrides&gt; Element</span></span></related>
  </Docs>
  <Members>
    <Member MemberName="BaseDirectory">
      <MemberSignature Language="C#" Value="public static string BaseDirectory { get; }" />
      <MemberSignature Language="ILAsm" Value=".property string BaseDirectory" />
      <MemberSignature Language="DocId" Value="P:System.AppContext.BaseDirectory" />
      <MemberSignature Language="VB.NET" Value="Public Shared ReadOnly Property BaseDirectory As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static property System::String ^ BaseDirectory { System::String ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.BaseDirectory : string" Usage="System.AppContext.BaseDirectory" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.AppContext</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="1378f-176">Obtient le nom de chemin du répertoire de base qu’utilise le service de résolution d’assembly pour détecter les assemblys.</span><span class="sxs-lookup"><span data-stu-id="1378f-176">Gets the pathname of the base directory that the assembly resolver uses to probe for assemblies.</span></span></summary>
        <value><span data-ttu-id="1378f-177">Nom de chemin du répertoire de base qu’utilise le service de résolution d’assembly pour détecter les assemblys.</span><span class="sxs-lookup"><span data-stu-id="1378f-177">the pathname of the base directory that the assembly resolver uses to probe for assemblies.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="1378f-178">Il s’agit d’une par propriété de domaine d’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-178">This is a per application domain property.</span></span> <span data-ttu-id="1378f-179">Sa valeur correspond à la <xref:System.AppDomain.BaseDirectory%2A?displayProperty=nameWithType> propriété du domaine d’application actuel.</span><span class="sxs-lookup"><span data-stu-id="1378f-179">Its value corresponds to the <xref:System.AppDomain.BaseDirectory%2A?displayProperty=nameWithType> property of the current application domain.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="GetData">
      <MemberSignature Language="C#" Value="public static object GetData (string name);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig object GetData(string name) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.AppContext.GetData(System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function GetData (name As String) As Object" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static System::Object ^ GetData(System::String ^ name);" />
      <MemberSignature Language="F#" Value="static member GetData : string -&gt; obj" Usage="System.AppContext.GetData name" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.AppContext</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netstandard-2.0">
          <AttributeName>System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Object</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="name" Type="System.String" Index="0" FrameworkAlternate="netcore-1.0;netcore-1.1;netcore-2.0;netcore-2.1;netcore-2.2;netcore-3.0;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8;netstandard-1.6;netstandard-2.0;xamarinandroid-7.1;xamarinios-10.8;netstandard-2.1" />
      </Parameters>
      <Docs>
        <param name="name"><span data-ttu-id="1378f-180">Nom de l'élément de données.</span><span class="sxs-lookup"><span data-stu-id="1378f-180">The name of the data element.</span></span></param>
        <summary><span data-ttu-id="1378f-181">Retourne la valeur de l’élément de données nommé attribué au domaine d’application actuel.</span><span class="sxs-lookup"><span data-stu-id="1378f-181">Returns the value of the named data element assigned to the current application domain.</span></span></summary>
        <returns><span data-ttu-id="1378f-182">La valeur de <paramref name="name" />, si <paramref name="name" /> identifie une valeur nommée ; sinon <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-182">The value of <paramref name="name" />, if <paramref name="name" /> identifies a named value; otherwise, <see langword="null" />.</span></span></returns>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="SetSwitch">
      <MemberSignature Language="C#" Value="public static void SetSwitch (string switchName, bool isEnabled);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig void SetSwitch(string switchName, bool isEnabled) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.AppContext.SetSwitch(System.String,System.Boolean)" />
      <MemberSignature Language="VB.NET" Value="Public Shared Sub SetSwitch (switchName As String, isEnabled As Boolean)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static void SetSwitch(System::String ^ switchName, bool isEnabled);" />
      <MemberSignature Language="F#" Value="static member SetSwitch : string * bool -&gt; unit" Usage="System.AppContext.SetSwitch (switchName, isEnabled)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.AppContext</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="switchName" Type="System.String" />
        <Parameter Name="isEnabled" Type="System.Boolean" />
      </Parameters>
      <Docs>
        <param name="switchName"><span data-ttu-id="1378f-183">Nom du commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-183">The name of the switch.</span></span></param>
        <param name="isEnabled"><span data-ttu-id="1378f-184">Valeur du commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-184">The value of the switch.</span></span></param>
        <summary><span data-ttu-id="1378f-185">Définit la valeur d’un commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-185">Sets the value of a switch.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="1378f-186">Le <xref:System.AppContext> classe permet aux auteurs de bibliothèque de fournir un mécanisme d’annulations uniforme des nouvelles fonctionnalités pour les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="1378f-186">The <xref:System.AppContext> class enables library writers to provide a uniform opt-out mechanism for new functionality for their users.</span></span> <span data-ttu-id="1378f-187">Elle établit un contrat souple entre les composants pour la communication des demandes de désactivation.</span><span class="sxs-lookup"><span data-stu-id="1378f-187">It establishes a loosely-coupled contract between components in order to communicate an opt-out request.</span></span> <span data-ttu-id="1378f-188">Cette fonctionnalité est particulièrement importante quand une modification est apportée aux fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="1378f-188">This capability is typically important when a change is made to existing functionality.</span></span> <span data-ttu-id="1378f-189">À l'inverse, il existe déjà une activation implicite des nouvelles fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1378f-189">Conversely, there is already an implicit opt-in for new functionality.</span></span>  
  
 <span data-ttu-id="1378f-190">Le <xref:System.AppContext.SetSwitch%2A> méthode est appelée par une application (ou une bibliothèque) pour déclarer la valeur d’un commutateur (qui est toujours un <xref:System.Boolean> valeur) qui définit une bibliothèque dépendante.</span><span class="sxs-lookup"><span data-stu-id="1378f-190">The <xref:System.AppContext.SetSwitch%2A> method is called by an application (or a library) to declare the value of a switch (which is always a <xref:System.Boolean> value) that a dependent library defines.</span></span> <span data-ttu-id="1378f-191">Le commutateur est toujours implicitement `false`, qui fournit le nouveau comportement.</span><span class="sxs-lookup"><span data-stu-id="1378f-191">The switch is always implicitly `false`, which provides the new behavior.</span></span> <span data-ttu-id="1378f-192">Définissant le commutateur avec `true` lui permet, qui fournit le comportement hérité.</span><span class="sxs-lookup"><span data-stu-id="1378f-192">Setting the switch to `true` enables it, which provides the legacy behavior.</span></span> <span data-ttu-id="1378f-193">Explicitement en définissant le commutateur avec `false` fournit également le nouveau comportement.</span><span class="sxs-lookup"><span data-stu-id="1378f-193">Explicitly setting the switch to `false` also provides the new behavior.</span></span> <span data-ttu-id="1378f-194">La bibliothèque dépendante peut vérifier ensuite la valeur du commutateur en appelant le <xref:System.AppContext.TryGetSwitch%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-194">The dependent library can then check the value of the switch by calling the <xref:System.AppContext.TryGetSwitch%2A> method.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="1378f-195">Il est préférable d’utiliser un format cohérent pour les noms de commutateur, puisqu’il s’agit d’un contrat formel exposé par une bibliothèque.</span><span class="sxs-lookup"><span data-stu-id="1378f-195">It's beneficial to use a consistent format for switch names, since they are a formal contract exposed by a library.</span></span> <span data-ttu-id="1378f-196">Voici les deux formats évidents.</span><span class="sxs-lookup"><span data-stu-id="1378f-196">The following are two obvious formats.</span></span>  
>   
> -   <span data-ttu-id="1378f-197">*Commutateur*.*espace de noms*.*nom_commutateur*</span><span class="sxs-lookup"><span data-stu-id="1378f-197">*Switch*.*namespace*.*switchname*</span></span>  
> -   <span data-ttu-id="1378f-198">*Commutateur*.*bibliothèque*.*nom_commutateur*</span><span class="sxs-lookup"><span data-stu-id="1378f-198">*Switch*.*library*.*switchname*</span></span>  
  
 <span data-ttu-id="1378f-199">Pour les applications exécutées sur le .NET Framework, outre la définition de la valeur d’un commutateur par programme, elle peut également être définie :</span><span class="sxs-lookup"><span data-stu-id="1378f-199">For applications running on the .NET Framework, in addition to setting the value of a switch programmatically, it can also be set:</span></span>  
  
-   <span data-ttu-id="1378f-200">En ajoutant le nom du commutateur et la valeur pour le [ \<AppContextSwitchOverrides >](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) élément dans le [ \<runtime >](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section d’un fichier de configuration d’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-200">By adding the switch name and value to the [\<AppContextSwitchOverrides>](~/docs/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element.md) element in the [\<runtime>](~/docs/framework/configure-apps/file-schema/runtime/runtime-element.md) section of an application configuration file.</span></span> <span data-ttu-id="1378f-201">Par exemple, ce qui suit définit un commutateur nommé `Libraries.FPLibrary.UseExactFloatingPointComparison` dont la valeur est `False`.</span><span class="sxs-lookup"><span data-stu-id="1378f-201">For example, the following defines a switch named `Libraries.FPLibrary.UseExactFloatingPointComparison` whose value is `False`.</span></span>  
  
    ```xml  
  
    <configuration>  
       <runtime>  
          <AppContextSwitchOverrides value="Libraries.FPLibrary.UseExactFloatingPointComparison=false" />   
       </runtime>  
    </configuration>  
  
    ```  
  
-   <span data-ttu-id="1378f-202">En ajoutant une valeur de chaîne dont le nom est le nom du commutateur à la `HKLM\SOFTWARE\Microsoft\.NETFramework\AppContext` clé dans le Registre.</span><span class="sxs-lookup"><span data-stu-id="1378f-202">By adding a string value whose name is the name of the switch to the `HKLM\SOFTWARE\Microsoft\.NETFramework\AppContext` key in the registry.</span></span> <span data-ttu-id="1378f-203">Sa valeur doit être la représentation sous forme de chaîne d’un <xref:System.Boolean> qui peut être analysé par le <xref:System.Boolean.Parse%2A?displayProperty=nameWithType> méthode ; autrement dit, il doit être le « True », « true », « False » ou « false ».</span><span class="sxs-lookup"><span data-stu-id="1378f-203">Its value must be the string representation of a <xref:System.Boolean> that can be parsed by the <xref:System.Boolean.Parse%2A?displayProperty=nameWithType> method; that is, it must be "True", "true", "False", or "false".</span></span>  
  
 <span data-ttu-id="1378f-204">Si `switchName` existe déjà, sa valeur est remplacée par la `isEnabled` argument.</span><span class="sxs-lookup"><span data-stu-id="1378f-204">If `switchName` already exists, its value is overwritten by the `isEnabled` argument.</span></span>  <span data-ttu-id="1378f-205">Autrement dit, le dernier appel à la <xref:System.AppContext.SetSwitch%2A> méthode remplace la valeur définie dans le Registre, dans un fichier de configuration d’application, ou par les appels précédents à la <xref:System.AppContext.SetSwitch%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-205">That is, the most recent call to the <xref:System.AppContext.SetSwitch%2A> method overrides the value defined in the registry, in an app configuration file, or by previous calls to the <xref:System.AppContext.SetSwitch%2A> method.</span></span>  
 
 ### <a name="appcontextsetswitch-and-net-core"></a><span data-ttu-id="1378f-206">AppContext.SetSwitch et .NET Core</span><span class="sxs-lookup"><span data-stu-id="1378f-206">AppContext.SetSwitch and .NET Core</span></span>

<span data-ttu-id="1378f-207">.NET core prend en charge les appels par programmation avec le <xref:System.AppContext.SetSwitch%2A> méthode uniquement.</span><span class="sxs-lookup"><span data-stu-id="1378f-207">.NET Core supports programmatic calls with the <xref:System.AppContext.SetSwitch%2A> method only.</span></span> <span data-ttu-id="1378f-208">Les commutateurs suivants sont pris en charge :</span><span class="sxs-lookup"><span data-stu-id="1378f-208">The following switches are supported:</span></span>

|<span data-ttu-id="1378f-209">Basculer</span><span class="sxs-lookup"><span data-stu-id="1378f-209">Switch</span></span>|<span data-ttu-id="1378f-210">Valeurs</span><span class="sxs-lookup"><span data-stu-id="1378f-210">Values</span></span>|<span data-ttu-id="1378f-211">Description</span><span class="sxs-lookup"><span data-stu-id="1378f-211">Description</span></span>|
|--|--|--|
|`System.Net.Http.SocketsHttpHandler.Http2Support`|<span data-ttu-id="1378f-212">`true` ou `false`</span><span class="sxs-lookup"><span data-stu-id="1378f-212">`true` or `false`</span></span>|<span data-ttu-id="1378f-213">Indique si la prise en charge pour le protocole HTTP/2 est activé (`true`) ou désactivé (`false`).</span><span class="sxs-lookup"><span data-stu-id="1378f-213">Indicates whether support for the HTTP/2 protocol is enabled (`true`) or disabled (`false`).</span></span> <span data-ttu-id="1378f-214">La valeur par défaut est désactivé.</span><span class="sxs-lookup"><span data-stu-id="1378f-214">The default is disabled.</span></span> <span data-ttu-id="1378f-215">Le commutateur doit être défini avant la première utilisation de <xref:System.Net.Http.HttpClient>.</span><span class="sxs-lookup"><span data-stu-id="1378f-215">The switch must be set before the first use of <xref:System.Net.Http.HttpClient>.</span></span> <span data-ttu-id="1378f-216">Disponible à partir de .NET Core 3.0 Preview 4.</span><span class="sxs-lookup"><span data-stu-id="1378f-216">Available starting with .NET Core 3.0 Preview 4.</span></span>|
|`System.Net.Http.useSocketsHttpHandler` |<span data-ttu-id="1378f-217">`true` ou `false`</span><span class="sxs-lookup"><span data-stu-id="1378f-217">`true` or `false`</span></span>|<span data-ttu-id="1378f-218">Détermine si la vue mise en réseau telles que les API <xref:System.Net.Http.HttpClient> utiliser <xref:System.Net.Http.SocketsHttpHandler?displayProperty=nameWithType> (`true`) ou <xref:System.Net.Http.HttpClientHandler?displayProperty=nameWithType> (`false`).</span><span class="sxs-lookup"><span data-stu-id="1378f-218">Determines whether high-level networking APIs such as <xref:System.Net.Http.HttpClient> use <xref:System.Net.Http.SocketsHttpHandler?displayProperty=nameWithType> (`true`) or <xref:System.Net.Http.HttpClientHandler?displayProperty=nameWithType> (`false`).</span></span>|   
  
## Examples  
 <span data-ttu-id="1378f-219">La ligne de code suivante définit un commutateur nommé `Switch.AmazingLib.ThrowOnException` à `true`, ce qui permet un comportement hérité.</span><span class="sxs-lookup"><span data-stu-id="1378f-219">The following line of code sets a switch named `Switch.AmazingLib.ThrowOnException` to `true`, which enables a legacy behavior.</span></span> <span data-ttu-id="1378f-220">La bibliothèque peut ensuite vérifier si un consommateur de bibliothèque a défini la valeur du commutateur en appelant le <xref:System.AppContext.TryGetSwitch%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-220">The library can then check whether a library consumer has set the value of the switch by calling the <xref:System.AppContext.TryGetSwitch%2A> method.</span></span>  
  
 [!code-csharp[System.AppContext.Class#1](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/TestValue1.cs#1)]
 [!code-vb[System.AppContext.Class#1](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/TestValue1.vb#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="1378f-221"><paramref name="switchName" /> a la valeur <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-221"><paramref name="switchName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="1378f-222"><paramref name="switchName" /> a la valeur <see cref="F:System.String.Empty" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-222"><paramref name="switchName" /> is <see cref="F:System.String.Empty" />.</span></span></exception>
        <altmember cref="M:System.AppContext.TryGetSwitch(System.String,System.Boolean@)" />
      </Docs>
    </Member>
    <Member MemberName="TargetFrameworkName">
      <MemberSignature Language="C#" Value="public static string TargetFrameworkName { get; }" />
      <MemberSignature Language="ILAsm" Value=".property string TargetFrameworkName" />
      <MemberSignature Language="DocId" Value="P:System.AppContext.TargetFrameworkName" />
      <MemberSignature Language="VB.NET" Value="Public Shared ReadOnly Property TargetFrameworkName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static property System::String ^ TargetFrameworkName { System::String ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.TargetFrameworkName : string" Usage="System.AppContext.TargetFrameworkName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.AppContext</AssemblyName>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netstandard-2.0">
          <AttributeName>System.ComponentModel.EditorBrowsable(System.ComponentModel.EditorBrowsableState.Never)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="1378f-223">Obtient le nom de la version de framework ciblée par l’application actuelle.</span><span class="sxs-lookup"><span data-stu-id="1378f-223">Gets the name of the framework version targeted by the current application.</span></span></summary>
        <value><span data-ttu-id="1378f-224">Le nom de la version de framework ciblée par l’application actuelle.</span><span class="sxs-lookup"><span data-stu-id="1378f-224">The name of the framework version targeted by the current application.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="1378f-225">Le nom de la version du framework cible correspond à la valeur de la <xref:System.Runtime.Versioning.TargetFrameworkAttribute.FrameworkName%2A?displayProperty=nameWithType> propriété.</span><span class="sxs-lookup"><span data-stu-id="1378f-225">The name of the target framework version corresponds to the value of the <xref:System.Runtime.Versioning.TargetFrameworkAttribute.FrameworkName%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="1378f-226">Pour obtenir la liste des noms de framework cible pour le .NET Framework, consultez le [ &lt;supportedRuntime&gt; élément](~/docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md) élément.</span><span class="sxs-lookup"><span data-stu-id="1378f-226">For a list of target framework names for the .NET Framework, see the [&lt;supportedRuntime&gt; Element](~/docs/framework/configure-apps/file-schema/startup/supportedruntime-element.md) element.</span></span>  
  
 ]]></format>
        </remarks>
        <altmember cref="T:System.Runtime.Versioning.TargetFrameworkAttribute" />
        <altmember cref="P:System.Runtime.Versioning.TargetFrameworkAttribute.FrameworkName" />
      </Docs>
    </Member>
    <Member MemberName="TryGetSwitch">
      <MemberSignature Language="C#" Value="public static bool TryGetSwitch (string switchName, out bool isEnabled);" />
      <MemberSignature Language="ILAsm" Value=".method public static hidebysig bool TryGetSwitch(string switchName, [out] bool&amp; isEnabled) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.AppContext.TryGetSwitch(System.String,System.Boolean@)" />
      <MemberSignature Language="VB.NET" Value="Public Shared Function TryGetSwitch (switchName As String, ByRef isEnabled As Boolean) As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; static bool TryGetSwitch(System::String ^ switchName, [Runtime::InteropServices::Out] bool % isEnabled);" />
      <MemberSignature Language="F#" Value="static member TryGetSwitch : string *  -&gt; bool" Usage="System.AppContext.TryGetSwitch (switchName, isEnabled)" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.AppContext</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>mscorlib</AssemblyName>
        <AssemblyVersion>2.0.5.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>netstandard</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>2.1.0.0</AssemblyVersion>
      </AssemblyInfo>
      <AssemblyInfo>
        <AssemblyName>System.Runtime</AssemblyName>
        <AssemblyVersion>4.2.0.0</AssemblyVersion>
        <AssemblyVersion>4.2.1.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="switchName" Type="System.String" />
        <Parameter Name="isEnabled" Type="System.Boolean" RefType="out" />
      </Parameters>
      <Docs>
        <param name="switchName"><span data-ttu-id="1378f-227">Nom du commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-227">The name of the switch.</span></span></param>
        <param name="isEnabled"><span data-ttu-id="1378f-228">Cette méthode la valeur de <paramref name="switchName" /> si <paramref name="switchName" /> a été trouvé, ou <see langword="false" /> si <paramref name="switchName" /> est introuvable.</span><span class="sxs-lookup"><span data-stu-id="1378f-228">When this method returns, contains the value of <paramref name="switchName" /> if <paramref name="switchName" /> was found, or <see langword="false" /> if <paramref name="switchName" /> was not found.</span></span> <span data-ttu-id="1378f-229">Ce paramètre est passé sans être initialisé.</span><span class="sxs-lookup"><span data-stu-id="1378f-229">This parameter is passed uninitialized.</span></span></param>
        <summary><span data-ttu-id="1378f-230">Tente d’obtenir la valeur d’un commutateur.</span><span class="sxs-lookup"><span data-stu-id="1378f-230">Tries to get the value of a switch.</span></span></summary>
        <returns><span data-ttu-id="1378f-231"><see langword="true" /> si <paramref name="switchName" /> a été défini et que l’argument <paramref name="isEnabled" /> contient la valeur du commutateur ; sinon, <see langword="false" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-231"><see langword="true" /> if <paramref name="switchName" /> was set and the <paramref name="isEnabled" /> argument contains the value of the switch; otherwise, <see langword="false" />.</span></span></returns>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="1378f-232">Le <xref:System.AppContext> classe permet aux auteurs de bibliothèque de fournir un mécanisme d’annulations uniforme des nouvelles fonctionnalités pour les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="1378f-232">The <xref:System.AppContext> class enables library writers to provide a uniform opt-out mechanism for new functionality for their users.</span></span> <span data-ttu-id="1378f-233">Elle établit un contrat souple entre les composants pour la communication des demandes de désactivation.</span><span class="sxs-lookup"><span data-stu-id="1378f-233">It establishes a loosely-coupled contract between components in order to communicate an opt-out request.</span></span> <span data-ttu-id="1378f-234">Cette fonctionnalité est particulièrement importante quand une modification est apportée aux fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="1378f-234">This capability is typically important when a change is made to existing functionality.</span></span> <span data-ttu-id="1378f-235">À l'inverse, il existe déjà une activation implicite des nouvelles fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="1378f-235">Conversely, there is already an implicit opt-in for new functionality.</span></span>  
  
 <span data-ttu-id="1378f-236">Le common language runtime remplit automatiquement les commutateurs affectés à un <xref:System.AppContext> instance en lisant le Registre et le fichier de configuration de l’application.</span><span class="sxs-lookup"><span data-stu-id="1378f-236">The common language runtime automatically populates the switches assigned to an <xref:System.AppContext> instance by reading the registry and the application's configuration file.</span></span> <span data-ttu-id="1378f-237">La valeur de ces commutateurs peut ensuite être remplacée et ajouté de nouveaux commutateurs, en appelant le <xref:System.AppContext.SetSwitch%2A> (méthode).</span><span class="sxs-lookup"><span data-stu-id="1378f-237">The value of these switches can then be overridden, and new switches added, by calling the <xref:System.AppContext.SetSwitch%2A> method.</span></span>  
  
 <span data-ttu-id="1378f-238">Une bibliothèque appelle le <xref:System.AppContext.TryGetSwitch%2A> méthode pour vérifier si ses consommateurs ont déclaré la valeur du commutateur et ensuite agissent en conséquence.</span><span class="sxs-lookup"><span data-stu-id="1378f-238">A library calls the <xref:System.AppContext.TryGetSwitch%2A> method to check whether its consumers have declared the value of the switch and then act appropriately on it.</span></span>  <span data-ttu-id="1378f-239">Par défaut, si le commutateur n’est pas défini, la nouvelle fonctionnalité est activée...</span><span class="sxs-lookup"><span data-stu-id="1378f-239">By default, if the switch is not defined, the new functionality is enabled..</span></span> <span data-ttu-id="1378f-240">Si le commutateur est défini et sa valeur est `false`, la nouvelle fonctionnalité est également activée.</span><span class="sxs-lookup"><span data-stu-id="1378f-240">If the switch is defined and its value is `false`, the new functionality is also enabled.</span></span> <span data-ttu-id="1378f-241">Si sa valeur est `true`, le comportement hérité est activé.</span><span class="sxs-lookup"><span data-stu-id="1378f-241">If its value is `true`, the legacy behavior is enabled.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="1378f-242">L’exemple suivant détermine si un consommateur de bibliothèque a défini un commutateur nommé `Switch.AmazingLib.ThrowOnException`.</span><span class="sxs-lookup"><span data-stu-id="1378f-242">The following example determines whether a library consumer has set a switch named `Switch.AmazingLib.ThrowOnException`.</span></span>  
  
 [!code-csharp[System.AppContext.Class#2](~/samples/snippets/csharp/VS_Snippets_CLR_System/System.AppContext.Class/cs/TestValue1.cs#2)]
 [!code-vb[System.AppContext.Class#2](~/samples/snippets/visualbasic/VS_Snippets_CLR_System/System.AppContext.Class/vb/TestValue1.vb#2)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.ArgumentNullException"><span data-ttu-id="1378f-243"><paramref name="switchName" /> a la valeur <see langword="null" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-243"><paramref name="switchName" /> is <see langword="null" />.</span></span></exception>
        <exception cref="T:System.ArgumentException"><span data-ttu-id="1378f-244"><paramref name="switchName" /> a la valeur <see cref="F:System.String.Empty" />.</span><span class="sxs-lookup"><span data-stu-id="1378f-244"><paramref name="switchName" /> is <see cref="F:System.String.Empty" />.</span></span></exception>
        <altmember cref="M:System.AppContext.SetSwitch(System.String,System.Boolean)" />
      </Docs>
    </Member>
  </Members>
</Type>